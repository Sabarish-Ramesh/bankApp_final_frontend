<div class="card">
  <div class="header-row">
    <h3 *ngIf="accountNo">Transactions for {{accountNo}}</h3>

    <div class="controls">
   
      <div class="sort-section">
        <label>Sort By:</label>
        <select [(ngModel)]="sortBy" (change)="onSortChange()">
          <option value="timestamp">Timestamp</option>
          <option value="amount">Amount</option>
        </select>
      </div>
    <div class="filterBtn">
      
      <button class="filter-btn" (click)="toggleFilters()">Filters</button>
      <button class="search-btn" (click)="search()">Search</button>
      </div>
    </div>
  </div>


  <div class="filter-popup" *ngIf="showFilters">
    <div class="filter-row">
      <label>Type</label>
      <input [(ngModel)]="type" placeholder="Deposit/Withdrawal/Transfer-In/Transfer-Out" />
    </div>
    <div class="filter-row">
      <label>Min Amount</label>
      <input type="number" [(ngModel)]="minAmount" />
    </div>
    <div class="filter-row">
      <label>Max Amount</label>
      <input type="number" [(ngModel)]="maxAmount" />
    </div>
    <div class="filter-row">
      <label>Start Date</label>
      <input type="datetime-local" [(ngModel)]="start" />
    </div>
    <div class="filter-row">
      <label>End Date</label>
      <input type="datetime-local" [(ngModel)]="end" />
    </div>

    
      <button class="apply-btn" (click)="applyFilters()">Apply Filters</button>

      <button class="apply-btn" (click)="removeFilters()">Remove Filters</button>
  
  </div>


  <table *ngIf="page?.content?.length">
    <thead>
      <tr>
        <th>Timestamp</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Account</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of page!.content">
        <td>{{t.timestamp | date:'dd-MMM-yyyy hh:mm:ss a'}}</td>
        <td>{{t.type}}</td>
        <td>{{t.amount | currency:'INR'}}</td>
        <td>{{t.accountNo}}</td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="!page?.content?.length">No transactions.</p>

  <div class="pagination" *ngIf="page">
    <button (click)="prevPage()" [disabled]="p === 0">Previous</button>
    <span>Page {{p + 1}} / {{page.totalPages}}</span>
    <button (click)="nextPage()" [disabled]="p >= page.totalPages - 1">Next</button>
  </div>
</div>
